import { useHead, useRuntimeConfig } from "#imports";
export function useGtagConsent(arg1, arg2) {
  const hasConsent = typeof arg1 === "boolean" ? arg1 : arg1.hasConsent ?? true;
  const { id } = typeof arg1 === "boolean" ? arg2 ?? {} : arg1;
  const { gtag: { id: defaultId } } = useRuntimeConfig().public;
  if (process.client && "dataLayer" in window) {
    const isInitialized = window.dataLayer.length > 2;
    if (hasConsent) {
      if (!isInitialized) {
        useHead({
          script: [{ src: `https://www.googletagmanager.com/gtag/js?id=${id || defaultId}` }]
        });
      } else {
        disableGtag(false, id || defaultId);
      }
      return;
    }
    disableGtag(true, id || defaultId);
  }
}
function disableGtag(value, id) {
  window[`ga-disable-${id}`] = value;
}
